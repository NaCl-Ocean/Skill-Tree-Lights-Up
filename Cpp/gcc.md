# GCC 编译器 

- 使用 gcc 指令编译 C 代码
- 使用 g++ 指令编译 C++代码

## 编译过程

1. **预处理 Pre Processing**  **指示编译器仅对输入文件进行预处理**

   - 处理 `#include` 和` #define` ，把`#include`包含进来的`.h` 文件插入到`#include`所在的位置，把源程序中使用到的用`#define`定义的宏用实际的字符串代替

   ```bash
   # 产生的预处理后的cpp文件默认缺省扩展名为.i 
   g++ -E test.cpp -0 test.i 
   ```

2. **编译 Compling** **为C++代码产生汇编语言后停止编译**

   ```bash
   # g++产生的汇编语言文件的缺省扩展名是 .s
   g++ -S test.i -o test.s
   ```

3. **汇编 Assembling**  **告诉g++把汇编语言编译为机器语言的目标代码后停止编译**

   ```shell
   g++ -C test.s -o test.o
   ```

4. **链接 Linking**

   ```
   
   ```

   

## g++ 重要编译参数

- **-g** 编译带调试信息的可执行文件

  - 告诉 GCC 产生能被GNU调试器 GDB 使用的调试信息，以调试程序

    ```bash
    # 产生带调试信息的可执行文件
    g++ -g test.cpp -o test
    ```

- **-O[n]** 优化源代码

  - **所谓优化**，例如省略掉代码中从未使用过的变量，直接将常量表达式用结果值代替等等，**这些操作会缩减目标文件包含的代码量，提高最终生成的可执行文件的运行效率**

  - -O 同时减小代码的长度和执行时间，等价于-O1

  - -O0 不做优化

  - -O1 默认优化

  - -O2 除了完成-O1的优化之外，还进行一些额外的调整工作，如指令调整等，一般使用-O2

  - -O3 包括循环展开和其他一些与处理特性相关的优化工作

    ```bash
    # 利用O2优化，产生优化后的可执行文件
    g++ test.cpp -o2 test
    ```

- **-l -L** 指定库文件 指定库文件路径